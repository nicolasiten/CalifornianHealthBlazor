@page "/BookAppointment"
@using CalifornianHealthBlazor.Data
@using CalifornianHealthBlazor.Helpers
@inject IJSRuntime JsRuntime
@inject ConsultantCalendarService ConsultantCalendarService


<section id="booking" class="section-padding">
    <h2 align="center">Book Appointment</h2>
    <hr style="width: 80%" />
    <div id="evoCalendar"></div>
</section>

@code {

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await BlazorHelpers.RenderCalendar(JsRuntime, this);
        }
    }

    [JSInvokable]
    public async Task DayClicked(DateTime date)
    {
        Console.WriteLine("clicked");
        string[] availableTimes = (await ConsultantCalendarService.GetFreeAppointments(date, 1)).ToArray();
        await BlazorHelpers.UpdateAvailableAppointmentsInCalendar(JsRuntime, availableTimes);
    //eventHTML += '<div><span class="badge" style="color: blue;">08:00</span</div>';
    }
}
